import{I as _,b as V,C as A,r as O,d as s,o as k,e as P,f as e,w as t,s as j,i as r,t as D,x as E,g as i,k as I,K as T,L as p}from"./index-cc972ea5.js";const G=()=>_({method:"get",url:"/admin/acl/permission"}),K=u=>u.id?_({method:"put",url:"/admin/acl/permission/update",data:u}):_({method:"post",url:"/admin/acl/permission/save",data:u}),L=u=>_({method:"delete",url:`/admin/acl/permission/remove/${u}`}),R={class:"dialog-footer"},H={__name:"index",setup(u){let b=V([]),n=V(!1);A(()=>{f()});const f=async()=>{let a=await G();a.code==200&&(b.value=a.data)};let o=O({id:null,code:null,level:null,name:null,pid:null});const C=a=>{n.value=!0,Object.assign(o,a)},M=a=>{Object.assign(o,{id:null,code:null,level:null,name:null,pid:null}),o.pid=a.id,o.level=a.level+1,n.value=!0},x=()=>{n.value=!1},h=async()=>{(await K(o)).code==200?(p({type:"success",message:o.id?"修改成功":"添加成功"}),f()):p({type:"error",message:o.id?"修改失败":"添加失败"}),n.value=!1},q=async a=>{(await L(a.id)).code==200?(p({type:"success",message:"删除成功"}),f()):p({type:"error",message:"删除失败"})};return(a,d)=>{const m=s("el-table-column"),c=s("el-button"),B=s("el-popconfirm"),N=s("el-table"),v=s("el-input"),g=s("el-form-item"),U=s("el-form"),$=s("el-dialog");return k(),P("div",null,[e(N,{border:"",data:i(b),"row-key":"id"},{default:t(()=>[e(m,{label:"名称",prop:"name"}),e(m,{label:"权限值",prop:"code"}),e(m,{label:"修改时间",prop:"updateTime"}),e(m,{label:"操作"},{default:t(({row:l,column:S,$index:z})=>[l.level<4?(k(),j(c,{key:0,onClick:y=>M(l)},{default:t(()=>[r(D(l.level==3?"添加功能":"添加菜单"),1)]),_:2},1032,["onClick"])):E("",!0),e(c,{type:"primary",disabled:l.level==1,onClick:y=>C(l)},{default:t(()=>[r("编辑")]),_:2},1032,["disabled","onClick"]),e(B,{title:"确定删除吗?",onConfirm:y=>q(l)},{reference:t(()=>[e(c,{type:"danger",disabled:l.level==1},{default:t(()=>[r("删除")]),_:2},1032,["disabled"])]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"]),e($,{modelValue:i(n),"onUpdate:modelValue":d[2]||(d[2]=l=>T(n)?n.value=l:n=l)},{header:t(()=>[r(" 新增菜单 ")]),footer:t(()=>[I("span",R,[e(c,{onClick:x},{default:t(()=>[r("取消")]),_:1}),e(c,{type:"primary",onClick:h},{default:t(()=>[r("确定")]),_:1})])]),default:t(()=>[e(U,null,{default:t(()=>[e(g,{label:"名称"},{default:t(()=>[e(v,{modelValue:i(o).name,"onUpdate:modelValue":d[0]||(d[0]=l=>i(o).name=l),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),e(g,{label:"权限"},{default:t(()=>[e(v,{modelValue:i(o).code,"onUpdate:modelValue":d[1]||(d[1]=l=>i(o).code=l),placeholder:"请输入权限"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{H as default};
