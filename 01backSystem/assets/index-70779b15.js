import{I as x,_ as R,b as g,C as T,d as i,o as u,s as b,w as a,f as l,g as o,k as s,K as I,t as y,e as C,F as z,q as $,i as D,L as f,p as H,j as J}from"./index-cc972ea5.js";const Q=(n,d)=>x({method:"get",url:`/admin/product/list/${n}/${d}`}),W=n=>x({methode:"get",url:`/admin/product/onSale/${n}`}),X=n=>x({methode:"get",url:`/admin/product/cancelSale/${n}`}),Y=n=>x({method:"get",url:`/admin/product/getSkuInfo/${n}`}),Z=n=>x({method:"delete",url:`/admin/product/deleteSku/${n}`});const p=n=>(H("data-v-f510577c"),n=n(),J(),n),ee=["src"],te=p(()=>s("h4",null,"查看商品的详情",-1)),se={class:"box"},le=p(()=>s("div",{class:"left"},"名称",-1)),ae={class:"right"},oe={class:"box"},ne=p(()=>s("div",{class:"left"},"描述",-1)),ie={class:"right"},ce={class:"box"},de=p(()=>s("div",{class:"left"},"价格",-1)),re={class:"right"},_e={class:"box"},ue=p(()=>s("div",{class:"left"},"平台属性",-1)),pe={class:"right"},me={class:"box"},ge=p(()=>s("div",{class:"left"},"销售属性",-1)),fe={class:"right"},he={class:"box"},ve=p(()=>s("div",{class:"left"},"商品图片",-1)),ye={class:"right"},xe=["src"],ke={__name:"index",setup(n){let d=g(1),h=g(8),V=g(10),w=g([]),r=g({}),v=g(!1);T(()=>{m()});let m=async c=>{c&&(d.value=1);let t=await Q(d.value,h.value);t.code==200&&(w.value=t.data.records,V.value=t.data.total)},U=async c=>{c.isSale?(await X(c.id)).code==200?(f({type:"success",message:"下架成功"}),m()):f({type:"error",message:"下架失败"}):(await W(c.id)).code==200?(f({type:"success",message:"上架成功"}),m()):f({type:"error",message:"上架失败"})},j=async c=>{v.value=!0;let t=await Y(c.id);t.code==200&&(r.value=t.data)};const L=async c=>{let t=await Z(c.id);t.code==200?(f({type:"success",message:"删除成功"}),w.value.length<=1&&(d.value-=1),m()):f({type:"error",message:"删除失败:"+t.data})};return(c,t)=>{const _=i("el-table-column"),k=i("SvgIcon"),S=i("el-button"),A=i("el-popconfirm"),B=i("el-table"),E=i("el-pagination"),q=i("el-tag"),F=i("el-carousel-item"),G=i("el-carousel"),M=i("el-drawer"),P=i("el-card");return u(),b(P,null,{default:a(()=>[l(B,{border:"",data:o(w)},{default:a(()=>[l(_,{type:"index",label:"序号",fixed:"left",width:"100",align:"center"}),l(_,{label:"名称",width:"200",prop:"skuName"}),l(_,{label:"描述",width:"300",prop:"skuDesc"}),l(_,{label:"图片",width:"200"},{default:a(({row:e,column:K,$index:O})=>[s("img",{src:e.skuDefaultImg,style:{width:"100px"}},null,8,ee)]),_:1}),l(_,{label:"重量",width:"200",prop:"weight"}),l(_,{label:"价格",width:"200",prop:"price"}),l(_,{label:"操作",fixed:"right",width:"250"},{default:a(({row:e,column:K,$index:O})=>[l(S,{size:"small",type:e.isSale?"info":"success",onClick:N=>o(U)(e)},{default:a(()=>[l(k,{class:"svg no_margin",name:e.isSale?"xiajia":"shangjia"},null,8,["name"])]),_:2},1032,["type","onClick"]),l(S,{size:"small",type:"primary"},{default:a(()=>[l(k,{class:"svg no_margin",name:"bianji"})]),_:1}),l(S,{size:"small",type:"primary",onClick:N=>o(j)(e)},{default:a(()=>[l(k,{class:"svg no_margin",name:"xiangqin"})]),_:2},1032,["onClick"]),l(A,{title:"确定删除吗",onConfirm:N=>L(e)},{reference:a(()=>[l(S,{size:"small",type:"primary"},{default:a(()=>[l(k,{class:"svg no_margin",name:"shanchu"})]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"]),l(E,{"current-page":o(d),"onUpdate:currentPage":t[0]||(t[0]=e=>I(d)?d.value=e:d=e),"page-size":o(h),"onUpdate:pageSize":t[1]||(t[1]=e=>I(h)?h.value=e:h=e),"page-sizes":[3,5,8,10],background:!0,layout:"prev, pager, next, jumper,->,sizes,total",total:o(V),onSizeChange:t[2]||(t[2]=e=>o(m)(1)),onCurrentChange:t[3]||(t[3]=e=>o(m)()),style:{"margin-top":"30px"}},null,8,["current-page","page-size","total"]),l(M,{modelValue:o(v),"onUpdate:modelValue":t[4]||(t[4]=e=>I(v)?v.value=e:v=e)},{header:a(()=>[te]),default:a(()=>[s("div",se,[le,s("div",ae,y(o(r).skuName),1)]),s("div",oe,[ne,s("div",ie,y(o(r).skuDesc),1)]),s("div",ce,[de,s("div",re,y(o(r).price),1)]),s("div",_e,[ue,s("div",pe,[(u(!0),C(z,null,$(o(r).skuAttrValueList,e=>(u(),b(q,{style:{margin:"5px"}},{default:a(()=>[D(y(e.valueName),1)]),_:2},1024))),256))])]),s("div",me,[ge,s("div",fe,[(u(!0),C(z,null,$(o(r).skuSaleAttrValueList,e=>(u(),b(q,{style:{"margin-right":"5px"}},{default:a(()=>[D(y(e.saleAttrValueName),1)]),_:2},1024))),256))])]),s("div",he,[ve,s("div",ye,[l(G,{interval:4e3,type:"card",height:"200px"},{default:a(()=>[(u(!0),C(z,null,$(o(r).skuImageList,e=>(u(),b(F,{key:e.id},{default:a(()=>[s("img",{src:e.imgUrl,style:{width:"100%"}},null,8,xe)]),_:2},1024))),128))]),_:1})])])]),_:1},8,["modelValue"])]),_:1})}}},be=R(ke,[["__scopeId","data-v-f510577c"]]);export{be as default};
